# Running

## Prepare

- Create a `.env` file from the `.env.example` file

  ```
  cp .env.example .env
  ```

- Install package

  ```
  npm install
  ```

- Build source

  ```
  npm run build
  ```

## Local (For DEV)

- Environment

  ```
  node v16+
  ```

- Docker commands

  - Build & run all container

    ```
    docker-compose up --build
    ```

  - Run all container
    ```
    docker-compose up
    ```
  - Run a container
    ```
    docker-compose up <service_name>
    ```
  - Exec

    ```
    docker exec -it <service_name> sh
    ```

## Migration

- Create migration file

  ```
  npm run typeorm migration:create --name=<file-name>
  ```

- Running migration

  ```
  npm run migration:run
  ```

- Revert migration

  ```
  npm run migration:revert
  ```

## Deploy

- Set `APP_ENV=production` in `.env`
- Run bellow command to create docker image

  ```
  docker-compose build --no-cache <service_name>
  ```

- Push image to ECR or other.

# Convention

- [Git Branch Convention](./docs/git-branch-convention.md)
- [Code Convention](./docs/code-convention.md)

# Architect

- [Project Structure](./docs/project-structure.md)
- Generated by

  ```
  brew install tree
  tree . -I 'dist|node_modules' >> docs/project-structure.md
  ```
